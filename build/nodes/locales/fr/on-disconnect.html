<!--
  Copyright 2022-2024 Gauthier Dandele

  Licensed under the MIT License,
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  https://opensource.org/licenses/MIT.

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="on-disconnect">
	<p>
		Se connecte à une base de données Firebase Realtime et ajoute/modifie des données à/de la base de données lorsque le
		client se déconnecte.
	</p>
	<h3>Entrées</h3>
	<dl class="message-properties">
		<dt>payload<span class="property-type">chaîne | booléen | nombre | tableau | objet | nul</span></dt>
		<dd>les données qui seront envoyées à la base de données.</dd>
		<dt class="optional">method<span class="property-type">chaîne de caractères</span></dt>
		<dd>
			le type de requête à appliquer aux données (définir, annuler, mettre à jour, supprimer ou définir avec priorité).
		</dd>
		<dt class="optional">priority<span class="property-type">nombre</span></dt>
		<dd>la priorité à appliquer aux données. Par défaut 1.</dd>
		<dt class="optional">topic<span class="property-type">chaîne de caractères</span></dt>
		<dd>le chemin des données à ajouter/modifier. Par défaut 'topic'.</dd>
	</dl>
	<h3>Sorties</h3>
	<dl class="message-properties">
		<dt>payload<span class="property-type">nombre</span></dt>
		<dd>contient l'heure actuel (timestamp).</dd>
		<dt>event<span class="property-type">chaîne de caractères</span></dt>
		<dd>l'événement déclenché (<code>connected</code> ou <code>disconnect</code>).</dd>
		<dt>topic<span class="property-type">chaîne de caractères</span></dt>
		<dd>l'URL de la base de données.</dd>
	</dl>
	<h3>Détails</h3>
	<p>
		Ce noeud vous permet d'écrire ou d'effacer des données lorsque votre client se déconnecte du serveur de base de
		données. Ces mises à jour se produisent que votre client se déconnecte proprement ou non, vous pouvez donc compter
		sur elles pour nettoyer les données même si une connexion est interrompue ou si un client tombe en panne.
	</p>
	<b>Notez que les opérations <code>onDisconnect</code> ne sont déclenchées qu'une seule fois !</b>
	<p></p>
	<p>Ci-dessous une liste des types de requêtes avec leur description :</p>
	<ul>
		<li><strong>Aucune</strong> : désactive l'entrée du noeud.</li>
		<li><strong>Définir</strong> : écrase les données à chaque écriture.</li>
		<li>
			<strong>Annuler</strong> : annule tous les événements de définition ou de mise à jour
			<code>onDisconnect</code> précédemment mis en file d'attente pour cet emplacement et tous les enfants.
		</li>
		<li>
			<strong>Mettre à jour</strong> : mets à jour les valeurs pour chaque clé correspondante dans la base de données.
		</li>
		<li>
			<strong>Supprimer</strong> : les données de la référence Firebase et toutes les données enfants sont supprimées.
		</li>
		<li><strong>Définir avec priorité</strong> : écrase les données et défini la priorité.</li>
	</ul>
	<p>
		Le <strong>Chemin</strong> détermine où les données seront écrites. Il peut être défini dans le noeud ou
		dynamiquement avec la propriété <code>msg.topic</code>
	</p>
	<p>
		Cliquer <a href="https://github.com/GogoVega/node-red-contrib-firebase-realtime-database/wiki/on-disconnect">ici</a> 
		pour en savoir plus sur l'utilisation de ce noeud.
	</p>
</script>
